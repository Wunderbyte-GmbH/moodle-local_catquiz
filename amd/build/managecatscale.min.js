define("local_catquiz/managecatscale",["exports","core_form/modalform","core/str","core/ajax","local_catquiz/notifications"],(function(_exports,_modalform,_str,_ajax,_notifications){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_shopping_cart
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.performDeletion=_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_ajax=_interopRequireDefault(_ajax);_exports.init=()=>{document.querySelectorAll(".manage-catscale").forEach((button=>{button.addEventListener("click",(e=>{e.preventDefault();const element=e.target;"delete"===element.dataset.action?performDeletion(element):"view"===element.dataset.action?function(element){let searchParams=new URLSearchParams(window.location.search),scaleid=element.dataset.scaleid,urlscaleid=searchParams.get("scaleid");searchParams.set("scaleid",scaleid);let sdv=0==searchParams.get("sdv")||null===searchParams.get("sdv")||urlscaleid!=scaleid?1:0;searchParams.set("sdv",sdv),window.location.search=searchParams.toString()}(element):function(button){var _parentelement$datase,_parentelement$datase2,_parentelement$datase3,_parentelement$datase4;const parentelement=button.closest(".list-group-item"),action=button.dataset.action;let formclass="local_catquiz\\form\\modal_manage_catscale",formvalues={id:null!==(_parentelement$datase=parentelement.dataset.id)&&void 0!==_parentelement$datase?_parentelement$datase:0,description:null!==(_parentelement$datase2=parentelement.dataset.description)&&void 0!==_parentelement$datase2?_parentelement$datase2:"",name:null!==(_parentelement$datase3=parentelement.dataset.name)&&void 0!==_parentelement$datase3?_parentelement$datase3:"",parentid:null!==(_parentelement$datase4=parentelement.dataset.parentid)&&void 0!==_parentelement$datase4?_parentelement$datase4:0};if("create"===action)formvalues={parentid:parentelement.dataset.id};let modalForm=new _modalform.default({formClass:formclass,args:formvalues,modalConfig:{title:(0,_str.get_string)("managecatscale","local_catquiz")},returnFocus:button});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(e=>{window.console.log(e.detail),window.location.reload()})),modalForm.show()}(element)}))}))};const performDeletion=async element=>{const id=element.closest(".list-group-item").dataset.id;_ajax.default.call([{methodname:"local_catquiz_delete_catscale",args:{id:id},done:function(res){res.success?window.location.reload():(0,_notifications.showNotification)(res.message,"danger")},fail:ex=>{console.log("ex:"+ex)}}])};_exports.performDeletion=performDeletion}));

//# sourceMappingURL=managecatscale.min.js.map