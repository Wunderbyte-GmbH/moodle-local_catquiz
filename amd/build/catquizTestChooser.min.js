define("local_catquiz/catquizTestChooser",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/**
   * JavaScript for mod_form to reload when a CAT model has been chosen.
   *
   * @module     mod_adaptivequiz/catquizTestChooser
   * @copyright  2023 Georg Mai√üer <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const SELECTORS_CATTESTCHOOSER="[data-on-change-action]",SELECTORS_CATTESTSUBMIT='[data-action="submitCatTest"]',SELECTORS_CATSCALESUBMIT='[data-action="submitCatScale"]',SELECTORS_CATSCALESUBMITCONTAINER='[id="fitem_id_submitcatscaleoption"]',SELECTORS_CATTESTCHECKBOXES='input[name^="catquiz_subscalecheckbox"]',SELECTORS_NUMBEROFFEEDBACKSSUBMIT='[data-action="submitNumberOfFeedbackOptions"]';function clickNoSubmitButton(element,buttonselector){const form=element.closest("form"),submitCatTest=form.querySelector(buttonselector),fieldset=submitCatTest.closest("fieldset");console.log(submitCatTest,"submitCatTest");const url=new URL(form.action);url.hash=fieldset.id,form.action=url.toString(),submitCatTest.click()}_exports.init=()=>{const selectors=document.querySelectorAll(SELECTORS_CATTESTCHOOSER),checkboxes=document.querySelectorAll(SELECTORS_CATTESTCHECKBOXES);var elements=new Set([...selectors,...checkboxes]);elements&&0!==elements.length&&elements.forEach((selector=>selector.addEventListener("change",(e=>{if(e.target.dataset.manualreload){document.querySelector(SELECTORS_CATSCALESUBMITCONTAINER).classList.remove("hidden");let submitbutton=document.querySelector(SELECTORS_CATSCALESUBMIT);return submitbutton.classList.remove("btn-primary"),submitbutton.classList.add("btn-danger"),void submitbutton.classList.remove("hidden")}switch(e.target.dataset.onChangeAction){case"reloadTestForm":clickNoSubmitButton(e.target,SELECTORS_CATTESTSUBMIT);break;case"reloadFormFromScaleSelect":clickNoSubmitButton(e.target,SELECTORS_CATSCALESUBMIT);break;case"numberOfFeedbacksSubmit":clickNoSubmitButton(e.target,SELECTORS_NUMBEROFFEEDBACKSSUBMIT)}}))))}}));

//# sourceMappingURL=catquizTestChooser.min.js.map