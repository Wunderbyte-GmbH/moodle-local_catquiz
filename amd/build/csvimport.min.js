define("local_catquiz/csvimport",["exports","core_form/dynamicform","local_catquiz/notifications","core/str"],(function(_exports,_dynamicform,_notifications,_str){var obj;
/*
   * @package    local_catquiz
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_dynamicform=(obj=_dynamicform)&&obj.__esModule?obj:{default:obj};const SELECTORS_FORMCONTAINER="#lcq_csv_import_form";_exports.init=()=>{const formContainer=document.querySelector(SELECTORS_FORMCONTAINER),dynamicForm=new _dynamicform.default(formContainer,"local_catquiz\\form\\csvimport");dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED,(e=>{const response=e.detail,errors=response.errors;dynamicForm.load({id:response.id,settingscallback:response.settingscallback}),errors!=[]&&void 0!==errors&&(console.log("errors.warnings: ",errors.warnings),void 0!==errors.warnings&&errors.warnings!=[]&&errors.warnings.forEach((warning=>(0,_notifications.showNotification)(warning,"warning",!1))),void 0!==errors.lineerrors&&errors.lineerrors.forEach((error=>(0,_notifications.showNotification)(error,"danger",!1))),void 0!==errors.generalerrors&&errors.generalerrors.forEach((error=>(0,_notifications.showNotification)(error,"danger",!1)))),1==response.success?((0,_str.get_string)("importsuccess","local_catquiz",response.numberofsuccessfullyupdatedrecords).then((message=>{(0,_notifications.showNotification)(message,"success",!1)})).catch((e=>{console.error(e)})),null!==response.callbackresponse&&null!==response.callbackresponse.message&&(0,_notifications.showNotification)(response.callbackresponse.message,"success",!1)):(0,_str.get_string)("importfailed","local_catquiz").then((message=>{(0,_notifications.showNotification)(message,"danger",!1)})).catch((e=>{console.error(e)}))})),dynamicForm.addEventListener(dynamicForm.events.FORM_CANCELLED,(e=>{e.preventDefault(),dynamicForm.load({})}))}}));

//# sourceMappingURL=csvimport.min.js.map