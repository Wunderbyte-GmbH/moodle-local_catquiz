define("local_catquiz/manage_catscale",["exports","core_form/modalform","core/str","core/ajax","local_catquiz/notifications"],(function(_exports,_modalform,_str,_ajax,_notifications){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_shopping_cart
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.performDeletion=_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_ajax=_interopRequireDefault(_ajax);_exports.init=()=>{console.log("manage catscale init"),document.querySelectorAll(".manage-catscale").forEach((button=>{button.addEventListener("click",(e=>{e.preventDefault();const element=e.target;"delete"===element.dataset.action?performDeletion(element):function(button){const parentelement=button.closest(".list-group-item"),action=button.dataset.action;let formclass="local_catquiz\\form\\modal_manage_catscale",formvalues={id:parentelement.dataset.id,description:parentelement.dataset.description,name:parentelement.dataset.name,parentid:parentelement.dataset.parentid};if("create"===(console.log(formvalues),action))formvalues={parentid:parentelement.dataset.id};let modalForm=new _modalform.default({formClass:formclass,args:formvalues,modalConfig:{title:(0,_str.get_string)("managecatscale","local_catquiz")},returnFocus:button});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(e=>{window.console.log(e.detail),window.location.reload(),console.log("createCatscale: form submitted")})),modalForm.show()}(element)}))}))};const performDeletion=async element=>{console.log("performDeletion");const id=element.closest(".list-group-item").dataset.id;_ajax.default.call([{methodname:"local_catquiz_delete_catscale",args:{id:id},done:function(res){console.log(res),res.success?window.reload():(0,_notifications.showNotification)(res.message,"danger")},fail:ex=>{console.log("ex:"+ex)}}])};_exports.performDeletion=performDeletion}));

//# sourceMappingURL=manage_catscale.min.js.map