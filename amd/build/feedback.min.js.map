{"version":3,"file":"feedback.min.js","sources":["../src/feedback.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_catquiz\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\n\n/**\n * Add event listeners to feedback tabs in order to call a webservice.\n */\nexport const init = () => {\n    const tabs = document.querySelectorAll('a.feedbacktab');\n    tabs.forEach(tab => {\n        if (tab.initialized) {\n            return;\n        }\n        tab.initialized = true;\n\n        tab.addEventListener('click', e => {\n            e.preventDefault();\n            const feedback = e.target.dataset.feedbackname;\n            const feedbacktranslated = e.target.dataset.feedbacknameTranslated;\n            if (!feedback) {\n                return;\n            }\n\n            // Try to get the attemptid from the data-attemptid attribute. Use the query parameters attempt and attemptid as\n            // fallback values.\n            const attemptid = e.target.dataset.attemptid\n            || (new URLSearchParams(window.location.search)).get('attempt')\n            || (new URLSearchParams(window.location.search)).get('attemptid');\n            Ajax.call([{\n                methodname: 'local_catquiz_feedback_tab_clicked',\n                args: {attemptid, feedback, feedbacktranslated}\n            }]);\n        });\n    });\n};\n"],"names":["document","querySelectorAll","forEach","tab","initialized","addEventListener","e","preventDefault","feedback","target","dataset","feedbackname","feedbacktranslated","feedbacknameTranslated","attemptid","URLSearchParams","window","location","search","get","call","methodname","args"],"mappings":";;;;;oJA0BoB,KACHA,SAASC,iBAAiB,iBAClCC,SAAQC,MACLA,IAAIC,cAGRD,IAAIC,aAAc,EAElBD,IAAIE,iBAAiB,SAASC,IAC1BA,EAAEC,uBACIC,SAAWF,EAAEG,OAAOC,QAAQC,aAC5BC,mBAAqBN,EAAEG,OAAOC,QAAQG,2BACvCL,sBAMCM,UAAYR,EAAEG,OAAOC,QAAQI,WAC/B,IAAIC,gBAAgBC,OAAOC,SAASC,QAASC,IAAI,YACjD,IAAIJ,gBAAgBC,OAAOC,SAASC,QAASC,IAAI,2BAChDC,KAAK,CAAC,CACPC,WAAY,qCACZC,KAAM,CAACR,UAAAA,UAAWN,SAAAA,SAAUI,mBAAAA"}