define("local_catquiz/testitem_model_overrides",["exports","core_form/dynamicform"],(function(_exports,_dynamicform){var obj;
/*
   * @package    local_catquiz
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_dynamicform=(obj=_dynamicform)&&obj.__esModule?obj:{default:obj};const SELECTORS_FORMCONTAINER="#lcq_model_override_form",SELECTORS_NOEDITBUTTON='[name="noedititemparams"]',SELECTORS_MODELSTATUSSELECTS='#lcq_model_override_form .custom-select[name^="override_"]',SELECTORS_ACTIVEMODELSELECT='[name="active_model"]',disabledStates=["0","-5"],syncSelectedState=model=>{const selected=model.value,selectorModel=model.id.match(/id_override_(.*)_select/)[1];let optionUpdateFun=option=>option.removeAttribute("disabled");disabledStates.includes(selected)&&(optionUpdateFun=option=>option.setAttribute("disabled","disabled"));document.querySelector(SELECTORS_ACTIVEMODELSELECT).options.forEach((o=>{o.value!=selectorModel||optionUpdateFun(o)}))};_exports.init=()=>{const dynamicForm=new _dynamicform.default(document.querySelector(SELECTORS_FORMCONTAINER),"local_catquiz\\form\\item_model_override_selector");dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED,(e=>{e.preventDefault();let formcontainer=document.querySelector(SELECTORS_FORMCONTAINER);const searchParams=new URLSearchParams(window.location.search);dynamicForm.load({editing:!formcontainer.querySelector(SELECTORS_NOEDITBUTTON),testitemid:searchParams.get("id"),contextid:searchParams.get("contextid"),scaleid:searchParams.get("scaleid"),component:searchParams.get("component"),updateitem:!0})})),dynamicForm.addEventListener(dynamicForm.events.NOSUBMIT_BUTTON_PRESSED,(e=>{let formcontainer=document.querySelector(SELECTORS_FORMCONTAINER);e.preventDefault();const searchParams=new URLSearchParams(window.location.search);dynamicForm.load({editing:!formcontainer.querySelector(SELECTORS_NOEDITBUTTON),testitemid:searchParams.get("id"),contextid:searchParams.get("contextid"),scaleid:searchParams.get("scaleid"),component:searchParams.get("component")}).then((result=>(document.querySelectorAll(SELECTORS_MODELSTATUSSELECTS).forEach((model=>{syncSelectedState(model),model.addEventListener("change",(e=>syncSelectedState(e.target)))})),result))).catch((err=>err))}))}}));

//# sourceMappingURL=testitem_model_overrides.min.js.map