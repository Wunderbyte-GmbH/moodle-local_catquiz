{"version":3,"file":"catquizTestChooser.min.js","sources":["../src/catquizTestChooser.js"],"sourcesContent":["/* eslint-disable no-case-declarations */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for mod_form to reload when a CAT model has been chosen.\n *\n * @module     mod_adaptivequiz/catquizTestChooser\n * @copyright  2023 Georg Mai√üer <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst SELECTORS = {\n    CATTESTCHOOSER: '[data-on-change-action]',\n    CATTESTSUBMIT: '[data-action=\"submitCatTest\"]',\n    CATSCALESUBMIT: '[data-action=\"submitCatScale\"]'\n};\n\n/**\n * Initialise it all.\n */\nexport const init = () => {\n\n    const selectors = document.querySelectorAll(SELECTORS.CATTESTCHOOSER);\n\n                // eslint-disable-next-line no-console\n                console.log(selectors, 'selectors');\n    if (selectors.length === 0) {\n        return;\n    }\n    selectors.forEach(selector =>\n        selector.addEventListener('change', e => {\n\n            switch (e.target.dataset.onChangeAction) {\n                case 'reloadTestForm':\n                    clickNoSubmitButton(e.target, SELECTORS.CATTESTSUBMIT);\n                    break;\n                case 'reloadFormFromScaleSelect':\n                    clickNoSubmitButton(e.target, SELECTORS.CATSCALESUBMIT);\n                    break;\n            }\n\n        })\n    );\n\n};\n\n/**\n * No Submit Button triggered.\n * @param {HTMLElement} element\n * @param {string} buttonselector\n */\nfunction clickNoSubmitButton(element, buttonselector) {\n\n    const form = element.closest('form');\n    // Find container for query selector.\n    const submitCatTest = form.querySelector(buttonselector);\n    const fieldset = submitCatTest.closest('fieldset');\n\n    // eslint-disable-next-line no-console\n    console.log(submitCatTest, 'submitCatTest');\n\n    const url = new URL(form.action);\n    url.hash = fieldset.id;\n\n    form.action = url.toString();\n    submitCatTest.click();\n}"],"names":["SELECTORS","clickNoSubmitButton","element","buttonselector","form","closest","submitCatTest","querySelector","fieldset","console","log","url","URL","action","hash","id","toString","click","selectors","document","querySelectorAll","length","forEach","selector","addEventListener","e","target","dataset","onChangeAction"],"mappings":";;;;;;;;MAwBMA,yBACc,0BADdA,wBAEa,gCAFbA,yBAGc,0CAqCXC,oBAAoBC,QAASC,sBAE5BC,KAAOF,QAAQG,QAAQ,QAEvBC,cAAgBF,KAAKG,cAAcJ,gBACnCK,SAAWF,cAAcD,QAAQ,YAGvCI,QAAQC,IAAIJ,cAAe,uBAErBK,IAAM,IAAIC,IAAIR,KAAKS,QACzBF,IAAIG,KAAON,SAASO,GAEpBX,KAAKS,OAASF,IAAIK,WAClBV,cAAcW,sBA7CE,WAEVC,UAAYC,SAASC,iBAAiBpB,0BAGhCS,QAAQC,IAAIQ,UAAW,aACV,IAArBA,UAAUG,QAGdH,UAAUI,SAAQC,UACdA,SAASC,iBAAiB,UAAUC,WAExBA,EAAEC,OAAOC,QAAQC,oBAChB,iBACD3B,oBAAoBwB,EAAEC,OAAQ1B,mCAE7B,4BACDC,oBAAoBwB,EAAEC,OAAQ1B"}