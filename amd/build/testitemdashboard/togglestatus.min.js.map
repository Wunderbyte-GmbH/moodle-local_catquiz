{"version":3,"file":"togglestatus.min.js","sources":["../../src/testitemdashboard/togglestatus.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     local_catquiz/backbutton\n * @copyright  2023 Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {showNotification} from 'local_catquiz/notifications';\nimport Ajax from 'core/ajax';\n\nvar SELECTORS = {\n    EYEICON: '#status-activity-eye',\n    TABCONTAINER: '#questions',\n};\n/**\n * Init\n * @param {*} testitemid\n * @param {*} scaleid\n * @param {*} contextid\n * @param {*} component\n */\nexport const init = (testitemid, scaleid, contextid, component) => {\n\n    const container = document.querySelector(SELECTORS.TABCONTAINER);\n    const eyeicon = container.querySelector(SELECTORS.EYEICON);\n\n    if (!eyeicon) {\n        return;\n    }\n\n    if (!eyeicon.dataset.initialized) {\n        eyeicon.dataset.initialized = 'true';\n\n        eyeicon.addEventListener('click', e => {\n            e.stopPropagation();\n            // Active status is 0;\n            let newstatus = 0;\n                        // eslint-disable-next-line no-console\n                        console.log(\"eyeicon.className \", eyeicon.className);\n                                                // eslint-disable-next-line no-console\n                                                console.log(\"eyeicon \", eyeicon);\n            if (eyeicon.className == 'fa fa-eye') {\n                // If the status was active (eye not slashed) when toggled, set newstatus to inactive.\n                newstatus = 1;\n            }\n\n            const data = {\n                'testitemid': testitemid,\n                'contextid': contextid,\n                'scaleid': scaleid,\n                'component': component,\n                'newstatus': newstatus,\n            };\n\n            // eslint-disable-next-line no-console\n            console.log(\"data \", data);\n\n            transmitAction('local_catquiz_toggle_testitemstatus', JSON.stringify(data));\n        });\n    }\n};\n\n/**\n * Ajax function to handle action buttons.\n * @param {string} methodname\n * @param {string} datastring\n */\nexport function transmitAction(methodname, datastring) {\n    Ajax.call([{\n      methodname: \"local_catquiz_execute_action\",\n      args: {\n        'methodname': methodname,\n        'data': datastring,\n      },\n      done: function(data) {\n\n        if (data.success == 1) {\n          showNotification(data.message, \"success\");\n        } else {\n          showNotification(data.message, \"danger\");\n        }\n\n      },\n      fail: function(ex) {\n        // eslint-disable-next-line no-console\n        console.log(\"ex:\" + ex);\n\n        showNotification(\"Something went wrong\", \"danger\");\n      },\n    }]);\n}"],"names":["SELECTORS","transmitAction","methodname","datastring","call","args","done","data","success","message","fail","ex","console","log","testitemid","scaleid","contextid","component","eyeicon","document","querySelector","dataset","initialized","addEventListener","e","stopPropagation","newstatus","className","JSON","stringify"],"mappings":";;;;;iLAwBIA,kBACS,uBADTA,uBAEc,sBAuDFC,eAAeC,WAAYC,0BAClCC,KAAK,CAAC,CACTF,WAAY,+BACZG,KAAM,YACUH,gBACNC,YAEVG,KAAM,SAASC,MAEO,GAAhBA,KAAKC,4CACUD,KAAKE,QAAS,+CAEdF,KAAKE,QAAS,WAInCC,KAAM,SAASC,IAEbC,QAAQC,IAAI,MAAQF,wCAEH,uBAAwB,4BAlE7B,CAACG,WAAYC,QAASC,UAAWC,mBAG3CC,QADYC,SAASC,cAAcpB,wBACfoB,cAAcpB,mBAEnCkB,UAIAA,QAAQG,QAAQC,cACjBJ,QAAQG,QAAQC,YAAc,OAE9BJ,QAAQK,iBAAiB,SAASC,IAC9BA,EAAEC,sBAEEC,UAAY,EAEJd,QAAQC,IAAI,qBAAsBK,QAAQS,WAElBf,QAAQC,IAAI,WAAYK,SACnC,aAArBA,QAAQS,YAERD,UAAY,SAGVnB,KAAO,YACKO,qBACDE,kBACFD,kBACEE,oBACAS,WAIjBd,QAAQC,IAAI,QAASN,MAErBN,eAAe,sCAAuC2B,KAAKC,UAAUtB"}