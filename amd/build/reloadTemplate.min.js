define("local_catquiz/reloadTemplate",["exports","core/ajax","local_catquiz/notifications","core/templates"],(function(_exports,_ajax,_notifications,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_catquiz
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_exports.transmitAction=transmitAction,_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates);function transmitAction(data){_ajax.default.call([{methodname:"local_catquiz_reload_template",args:{data:data},done:function(response){1==response.success?((0,_notifications.showNotification)(response.message,"success"),function(data,response){const dataobject=JSON.parse(data),template=dataobject.templatelocation,templateid="[data-templateid='"+dataobject.templatelocation+"']",responseobject=JSON.parse(response.data);_templates.default.renderForPromise(template,responseobject).then((_ref=>{let{html:html,js:js}=_ref;return _templates.default.replaceNode(templateid,html,js),!0})).catch((e=>{console.log(e)}))}(data,response)):(0,_notifications.showNotification)(data.message,"danger")},fail:function(ex){console.log("ex:"+ex),(0,_notifications.showNotification)("Something went wrong","danger")}}])}_exports.init=selector=>{document.querySelectorAll(selector).forEach((element=>{let data=element.dataset;element.addEventListener("click",(e=>{e.stopPropagation(),transmitAction(JSON.stringify(data))}))}))}}));

//# sourceMappingURL=reloadTemplate.min.js.map