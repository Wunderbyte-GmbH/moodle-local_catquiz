define("local_catquiz/managecatcontext",["exports","core_form/modalform","core/str","core/ajax","local_catquiz/notifications"],(function(_exports,_modalform,_str,_ajax,_notifications){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_shopping_cart
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.performDeletion=_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_ajax=_interopRequireDefault(_ajax);const SELECTORS_MANAGECATCONTEXT=".manage-catcontext";_exports.init=()=>{document.querySelectorAll(SELECTORS_MANAGECATCONTEXT).forEach((button=>{button.initialized||(button.initialized=!0,button.addEventListener("click",(e=>{e.preventDefault();const element=e.target;"delete"===element.dataset.action?performDeletion(element):function(button){var _button$dataset$id,_button$dataset$id2;const action=button.dataset.action;let formclass="local_catquiz\\form\\edit_catcontext",formvalues={id:null!==(_button$dataset$id=button.dataset.id)&&void 0!==_button$dataset$id?_button$dataset$id:0};if("create"===action)formvalues={parentid:null!==(_button$dataset$id2=button.dataset.id)&&void 0!==_button$dataset$id2?_button$dataset$id2:0};let modalForm=new _modalform.default({formClass:formclass,args:formvalues,modalConfig:{title:(0,_str.get_string)("managecatcontexts","local_catquiz")},returnFocus:button});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{window.location.reload()})),modalForm.show()}(element)})))}))};const performDeletion=async element=>{const id=element.closest(".list-group-item").dataset.id;_ajax.default.call([{methodname:"local_catquiz_delete_catcontext",args:{id:id},done:function(res){res.success?window.location.reload():(0,_notifications.showNotification)(res.message,"danger")},fail:ex=>{console.log("ex:"+ex)}}])};_exports.performDeletion=performDeletion}));

//# sourceMappingURL=managecatcontext.min.js.map