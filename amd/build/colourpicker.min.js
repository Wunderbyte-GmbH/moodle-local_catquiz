define("local_catquiz/colourpicker",["exports","core/templates","core/str"],(function(_exports,_templates,_str){var obj;
/**
   * JavaScript for mod_form to reload when a CAT model has been chosen.
   *
   * @module     local_catquiz/colourpicker
   * @copyright  2023 Georg Mai√üer <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};const SELECTORS_SELECTCOLOURPICKER='select[name^="wb_colourpicker_"]',SELECTORS_COLOUR="span.colourpickercircle";_exports.init=()=>{document.querySelectorAll(SELECTORS_SELECTCOLOURPICKER).forEach((selectcolor=>{selectcolor.dataset.initialized||(selectcolor.dataset.initialized="true",async function(selectcolor){const colours=await Promise.all([...selectcolor.querySelectorAll("option")].map((async el=>{const colour=el.value;let colourname=el.textContent;try{colourname=await(0,_str.get_string)("color_"+el.value+"_name","local_catquiz")}catch(err){}return{colour:colour,colourname:colourname,colourvalue:el.innerHTML,selected:selectcolor.value==el.value,id:selectcolor.name}}))),colourobject=colours.filter((e=>e.selected)).pop(),data={colours:colours,colour:colourobject.colour,id:selectcolor.name};_templates.default.renderForPromise("local_catquiz/colour_picker",data).then((_ref=>{let{html:html}=_ref;selectcolor.classList.add("hidden"),selectcolor.insertAdjacentHTML("afterend",html);const colourpicker=document.querySelector("span[data-id=wb_colourpick_id_"+selectcolor.name+"]"),colourselectnotify=document.querySelector("span[data-id=wb_colourselectnotify_id_"+selectcolor.name+"]"),colours=colourpicker.querySelectorAll(SELECTORS_COLOUR);return colours.forEach((el=>{el.addEventListener("click",(e=>{colourselectnotify.innerHTML=e.target.dataset.colourname,colours.forEach((el=>el.classList.remove("selected"))),e.target.classList.add("selected"),selectcolor.value=e.target.dataset.colour}))})),!0})).catch((e=>{console.log(e)}))}(selectcolor))}))}}));

//# sourceMappingURL=colourpicker.min.js.map